<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Custom X Viewer</title>
</head>
<body>
  <h2>Twitter Control Panel</h2>
  <label><input type="checkbox" id="hideForYou"> Hide "For you" Tab</label>

  <script>
    const key = 'cp-settings'
    let settings = JSON.parse(localStorage.getItem(key) || '{}')

    const toggle = document.getElementById('hideForYou')
    toggle.checked = settings.hideForYou || false

    toggle.addEventListener('change', () => {
      settings.hideForYou = toggle.checked
      localStorage.setItem(key, JSON.stringify(settings))
      applySettings()
    })

    function applySettings() {
      if (!settings.hideForYou) return
      const tryHide = () => {
        const forYouTab = document.querySelector('a[role="tab"][href="/home"]')
        if (forYouTab && forYouTab.innerText.includes("For you")) {
          forYouTab.style.display = 'none'
        } else {
          setTimeout(tryHide, 1000)
        }
      }
      tryHide()
    }

    applySettings()
  </script>
</body>
</html>